{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-a4236fb63b8574ae.js","src/js/refs.js","src/js/btn-anchor.js","src/js/changeTheme.js","src/js/modal-team.js","src/js/modal-authorization.js","src/js/renderMarkup.js","node_modules/@parcel/runtime-js/lib/runtime-70c3aabb32a86823.js","src/js/genresList.js","src/js/cleanerMarkup.js","src/js/createLibraryMarkup.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"7OqUs\\\":\\\"my-library.8a622aeb.js\\\",\\\"fKKvY\\\":\\\"filmWrap.dabdf2b2.jpg\\\"}\"));","export const refs = {\n  preloaderEl: document.querySelector('#preloader'),\n  imgElArr: document.getElementsByClassName('film-item__img'),\n  bodyEl: document.querySelector('body'),\n  infoFilmWrapEl: document.querySelector('.infoFilm__wrap'),\n  fetchDataValue:null,\n  btnAnchorEl: document.getElementsByClassName('btn_anchor')[0],\n  darkBtn: document.querySelector('button[data-theme=\"onDark\"]'),\n  lightBtn: document.querySelector('button[data-theme=\"onLight\"]'),\n  cardListEl: document.querySelector('ul.card__list'),\n  headerFormEl: document.querySelector('.header__form'),\n  headerErrorEl: document.querySelector('.header__error'),\n  libBtnContainerEl: document.querySelector('.btn-container'),\n  \n};","import {refs} from './refs'\n\ndocument.querySelector('body').onscroll = function (event) {\n  if (event.target.scrollingElement.scrollTop > 0) {\n    refs.btnAnchorEl.classList.remove('btn_anchor-hidden');\n  } else {\n    refs.btnAnchorEl.classList.add('btn_anchor-hidden');\n  }\n};\n\ndocument.querySelector('.btn_anchor').addEventListener('click', () => {\n  document.querySelector('body').scrollIntoView({\n    top: 0, behavior: 'smooth'\n  });\n});\n","import { refs } from \"./refs\";\n\n\nrefs.darkBtn.addEventListener('click', onDarkBtnClick);\nrefs.lightBtn.addEventListener('click', onLightBtnClick);\n\nfunction onDarkBtnClick() {\n     refs.bodyEl.classList.toggle('dark__theme')\n    localStorage.setItem('theme', 'dark')\n}\n\nfunction onLightBtnClick() {\nlocalStorage.setItem('theme', '')\n    refs.bodyEl.classList.remove('dark__theme')\n}\n\n// При перезагрузке страницы берём тему из локалсторэдж\nconst theme = localStorage.getItem('theme')\n\nif (theme === 'dark') {\n    refs.bodyEl.classList.toggle('dark__theme')\n}","const refs = {\n  openModal: document.querySelector('.footer__link'),\n  ModalTeamBackdrop: document.querySelector('.team__backdrop'),\n  ModalTeamBody: document.querySelector('body'),\n  ModalTeamBtn: document.querySelector('.modal__close-button'),\n};\n// добавление слушателей на события\n\nrefs.openModal.addEventListener('click', onModalOpen);\nrefs.ModalTeamBtn.addEventListener('click', onModalClose);\nrefs.ModalTeamBackdrop.addEventListener('click', onBackdropClick);\n\n// функция открытия модалки в которой снимается слушатель\n\nfunction onModalOpen(e) {\n  window.addEventListener('keydown', onEscKeyPress);\n  e.preventDefault();\n  refs.ModalTeamBody.classList.add('no-scroll');\n  refs.ModalTeamBackdrop.classList.remove('visually-hidden');\n}\n\n// функция закрытия модалки в которой вешается слушатель на нажатие\n\nfunction onModalClose() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.ModalTeamBody.classList.remove('no-scroll');\n  refs.ModalTeamBackdrop.classList.add('visually-hidden');\n}\n\n// функции на логическую работу по нажатию пользователя\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onModalClose();\n  }\n}\nfunction onEscKeyPress(e) {\n  const isEscKey = e.code === 'Escape';\n  if (isEscKey) {\n    onModalClose();\n  }\n}\n","export const refs = {\n    authorizationBtn: document.querySelector('#headerAuthorization'),\n    modalAuthorizationBackdrop: document.querySelector('.backdrop-modalAuthorization'),\n    modalCloseAuthorozation: document.querySelector('.authorization__close'),\n    modalAuthorizationLink: document.querySelector('.authorization__link'),\n    modalRegistrationBackdrop: document.querySelector('.backdrop-modalRegistration'),\n    modalCloseRegistration: document.querySelector('.registration__close'),\n}\n\nrefs.authorizationBtn.addEventListener('click', onAuthorizationBtnClick);\nrefs.modalCloseAuthorozation.addEventListener('click', onModalCloseAuthorozationClick);\n\nfunction onAuthorizationBtnClick(event) {\n    event.preventDefault()\n    refs.modalAuthorizationBackdrop.classList.remove('visually-hidden')\n\n}\n\nfunction onModalCloseAuthorozationClick(event) {\n     event.preventDefault()\n   refs.modalAuthorizationBackdrop.classList.add('visually-hidden') \n}\n\n\n\n// Модальное окно регистрации\nrefs.modalAuthorizationLink.addEventListener('click', onModalAuthorizationLinkClick);\n\nfunction onModalAuthorizationLinkClick(event) {\n    event.preventDefault()\n    refs.modalAuthorizationBackdrop.classList.add('visually-hidden');\n    refs.modalRegistrationBackdrop.classList.remove('visually-hidden')\n}\n\nrefs.modalCloseRegistration.addEventListener('click', onModalCloseRegistrationClick);\n\nexport default function onModalCloseRegistrationClick(event) {\n    event.preventDefault();\n    refs.modalRegistrationBackdrop.classList.add('visually-hidden');\n}","export function renderFoo(markup, renderTarget) {\n  renderTarget.insertAdjacentHTML('beforeend', markup);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fKKvY\")).toString();","const genresList = {\n  28: 'Action',\n  12: 'Adventure',\n  16: 'Animation',\n  35: 'Comedy',\n  80: 'Crime',\n  99: 'Documentary',\n  18: 'Drama',\n  10751: 'Family',\n  14: 'Fantasy',\n  27: 'Horror',\n  36: 'History',\n  10402: 'Music',\n  9648: 'Mystery',\n  10749: 'Romance',\n  878: 'Science Fiction',\n  10770: 'TV Movie',\n  53: 'Thriller',\n  10752: 'War',\n  37: 'Western',\n};\n\n//создаем функцию searchGenresById, которая возвращает строку с жанрами на основе  genre_ids,\nexport const searchGenresById = idArrayList => {\n  // условие\n  if (idArrayList.length > 2) {\n    idArrayList.splice(2);\n    idArrayList.push('etc');\n  }\n\n  return idArrayList\n    .map(item => {\n      return genresList[item] || 'etc';\n    })\n    .join(', ');\n};\n","// referenceEl is the place where we delete the markup\nexport function cleanerMarkup(referenceEl) {\n  referenceEl.innerHTML = '';\n};","import { refs } from './refs';\nimport { renderFoo } from './renderMarkup';\nimport img from '../images/filmWrap.jpg';\nimport { searchGenresById } from './genresList';\nimport {cleanerMarkup} from './cleanerMarkup';\nlet libBtnId = '';\n\nrefs.libBtnContainerEl.addEventListener('click', onLibBtnClick);\n\nfunction onLibBtnClick(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return\n  }\n  libBtnId = e.target.id;\n  // console.log('ID c onLibBtnClick :', libBtnId);\n  createLibraryMarkup(libBtnId);\n}\n\nlet localStorageData = JSON.parse(localStorage.getItem('localStorageData'));\n\nasync function createLibraryMarkup(onBtnClick) {\n  //получаем список фильмов по запросу\n  let results = null;\n\n  if (onBtnClick === 'watched') {\n    results = localStorageData.watchedFilms;\n  }\n\n  if (onBtnClick === 'queue') {\n    results = localStorageData.queueFilms;\n  }\n\n  // console.log(results);\n  // получаем массив из елементов 'li' , переводим в строку с помощю join\n  const filmCards = results\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"film__item\">\n        <a class=\"film__link\" id=\"${id}\">\n  <div class=\"film__wrap\">\n      <img src=${\n        poster_path ? `https://image.tmdb.org/t/p/original${poster_path}` : img\n      } class=\"film-item__img\" alt=\"${title}\" width=\"300\">\n  </div>\n  <div class=\"wrap__film>\n  <div class=\"film__title-wrap\">\n  <h3 class=\"film__title\">${title}</h3>\n  </div>\n  <div class=\"film__genres-and-date\">\n  <p class=\"film__genres\">${\n    searchGenresById(genre_ids) ? searchGenresById(genre_ids) : 'Unknown genre'\n  }</p>\n  <p class=\"film__release-date\">${\n    //проверяем через тернарник\n    release_date ? new Date(release_date).getFullYear() : 'Nobody know'\n  }</p>\n\n   </div>\n   </div>\n   </a>\n   </li>`\n    )\n    .join('');\n\n  cleanerMarkup(refs.cardListEl);\n  // возвращаем строку\n  renderFoo(filmCards, refs.cardListEl);\n\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$ee27a4d7c64fc8c4$export$21666b427502ea6d","preloaderEl","document","querySelector","imgElArr","getElementsByClassName","bodyEl","infoFilmWrapEl","fetchDataValue","btnAnchorEl","darkBtn","lightBtn","cardListEl","headerFormEl","headerErrorEl","libBtnContainerEl","onscroll","event","target","scrollingElement","scrollTop","classList","remove","add","addEventListener","scrollIntoView","top","behavior","toggle","localStorage","setItem","getItem","$53c8cd70eab94c2b$var$refs","openModal","ModalTeamBackdrop","ModalTeamBody","ModalTeamBtn","$53c8cd70eab94c2b$var$onModalClose","window","removeEventListener","$53c8cd70eab94c2b$var$onEscKeyPress","e","code","preventDefault","currentTarget","$f24f86b8f78f1d3a$export$21666b427502ea6d","authorizationBtn","modalAuthorizationBackdrop","modalCloseAuthorozation","modalAuthorizationLink","modalRegistrationBackdrop","modalCloseRegistration","$8fa1c37b43059e2f$export$3fba33f419adc4b8","markup","renderTarget","insertAdjacentHTML","$fad49ad56638fa2d$exports","URL","resolve","import","meta","url","toString","$1d331006f44ca7c1$var$genresList","$1d331006f44ca7c1$export$f70117a985051741","idArrayList","splice","push","map","item","join","$78dcdbced9813b4a$export$1f080959f1244fec","referenceEl","innerHTML","$3a85ab4842868df7$var$libBtnId","nodeName","async","onBtnClick","results","$3a85ab4842868df7$var$localStorageData","watchedFilms","queueFilms","filmCards","poster_path","title","genre_ids","release_date","$parcel$interopDefault","Date","getFullYear","$3a85ab4842868df7$var$createLibraryMarkup"],"version":3,"file":"my-library.8a622aeb.js.map"}